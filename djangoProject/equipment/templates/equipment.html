{% extends "baseTemplate.html" %}
{% load static %}

{% block page_css %}
    <link rel="stylesheet" href="{% static 'css/equipment.css' %}">
{% endblock %}

{% block content %}
<h1 class="equipment-title">Equipment Inventory and Maintenance</h1>
<a href="{% url 'manage_page' %}">
    <button class="type-button">Manage Equipment and Vendors</button>
</a>
<a href="{% url 'problems_page' %}">
    <button class="type-button">Report and Search Problems</button>
</a>
<!--
<div class="type-parent">
    <div class="type-left">Equipment Type:</div>
    <input class="type-input" type="text" placeholder="Type">
    <button class="type-button">SEARCH</button>
    
    todo: Originally this was a dropdown, remove to text input?-->
 <!-- 
    <select class="type-dropdown">
        <option value="Stethoscope">Stethoscope</option>
        <option value="Gloves">Gloves</option>
        <option value="Thermometer">Thermometer</option>
    </select>
-->
</div>

<div class="search-parent">  
    <div class="vendor-background">
        <div class="vendor-title">Search By Vendor</div>
        <div class="vendor-input">
            <form method="GET" action="{% url 'vendor_search' %}">
                <input class="vendor-id" type="text" name="vendorid" placeholder="Vendor ID" value="{{ query_vendorid }}">
                <input class="vendor-name" type="text" name="name" placeholder="Vendor Name" value="{{ query_name }}">
                <button class="vendor-button">SEARCH</button>
            </form>
        </div>
    </div>

    <div class="inventory-background">
        <div class="inventory-title">Search by Inventory</div>
        <div class="inventory-interact">
            <form method="GET" action="{% url 'equipment' %}">
                <input class="inventory-id" type="text" name="equipmentid" placeholder="Equipment ID" value="{{ query_id }}">
                <input class="inventory-id" type="text" name="type" placeholder="Equipment Type" value="{{ query_type }}">
                <button class="inventory-button">SEARCH</button>
            </form>
        </div>
    </div>
</div>

<div class="search-parent">
    <div class="inventory-background">
        <!-- Vendor Details -->
        {% if vendor_results %}
            <h2>Vendor Details</h2>
            <ul>
                {% for vendor in vendor_results %}
                    <li>
                        <p><strong>Vendor Name:</strong> {{ vendor.name }}</p>
                        <p><strong>Vendor ID:</strong> {{ vendor.vendorid }}</p>
                        <p><strong>Address:</strong> {{ vendor.address }}</p>
                        <p><strong>Equipment Types:</strong> {{ vendor.equipment_types }}</p>
                        <p><strong>Preferred:</strong> {{ vendor.preferred|yesno:"Yes,No" }}</p>
                        <p><strong>-----------------------------</strong></p>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            {% if query_name or query_vendorid %}
                <p>No vendors found matching the criteria.</p>
            {% endif %}
        {% endif %}
    </div>

    
    <div class="inventory-background">
        <!-- Equipment Details -->
        {% if equipment_results %}
        <h2>Equipment Details</h2>
        <ul>
            {% for item in equipment_results %}
                <li>
                    <p><strong>Equipment ID:</strong> {{ item.equipmentid }}</p>
                    <p><strong>Type:</strong> {{ item.type }}</p>
                    <p><strong>Description:</strong> {{ item.description }}</p>
                    <p><strong>Department:</strong> {{ item.departmentleased }}</p>
                    <p><strong>Owned/Leased:</strong> {{ item.owned_lease }}</p>
                    {% if item.purchasedate %}
                        <p><strong>Purchase Date:</strong> {{ item.purchasedate }}</p>
                    {% endif %}
                    {% if item.warenty_info %}
                        <p><strong>Warranty Info:</strong> {{ item.warenty_info }}</p>
                    {% endif %}
                    {% if item.lease_start %}
                        <p><strong>Lease Start:</strong> {{ item.lease_start }}</p>
                        <p><strong>Lease End:</strong> {{ item.lease_end }}</p>
                        <p><strong>Leasing Vendor:</strong> {{ item.vendor }}</p>
                    {% endif %}
                    <p><strong>-----------------------------</strong></p>
                </li>
            {% endfor %}
        </ul>
        {% else %}
            <p>No equipment found.</p>
        {% endif %}
    </div>
</div>

{% endblock %}
